---
// Astro の Frontmatter が必要であればここに記述します。
// 特になければ空のままで OK です。
---

<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Tsunami Evacuation</title>
    <!-- Google Fonts 等の外部リソース -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap"
    />

    <!-- グローバルCSSとしてまとめる場合は is:global をつけると他コンポーネントにも影響します。 
         このページだけに適用したいなら is:global は外してください。 -->
    <style is:global>
      /* CSSここから */
      html {
        font-size: calc(100vw / 1600);
      }

      * {
        box-sizing: border-box;
      }

      #main {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        margin: 0;
        padding: 0;
        border: 0;
      }

      #content-in {
        width: 100%;
      }

      #townBoard_content {
        font-family: 'Noto Sans', sans-serif;
        font-size: 40rem;
        font-weight: 700;
        text-align: center;
        color: rgba(30, 30, 30, 1);
        line-height: 1.5;
        filter: drop-shadow(0 4px 4px rgba(0, 0, 0, 0.25));
        border: 1px solid rgba(0, 0, 0, 1);
        box-sizing: border-box;
        width: 100%;
        height: 100vh;
      }

      .separator {
        background-color: black;
        height: 100%;
      }

      @keyframes blink {
        0%,
        100% {
          background-color: rgba(255, 255, 0, 0.989);
        }
        50% {
          background-color: rgba(0, 0, 0, 0.76);
        }
      }

      .blink {
        animation: blink 3s infinite;
      }

      .entry-title {
        display: none;
      }

      .content {
        margin: 0;
      }

      .container-top {
        display: none;
      }

      .logo-header {
        display: none;
      }

      .site-name-text {
        display: none;
      }

      .content-top {
        margin: 0;
      }

      .scrollbar::-webkit-scrollbar {
        display: none;
      }

      .scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      .entry-header {
        display: none;
      }

      .entry-content {
        margin: 0;
      }

      .footer {
        display: none;
      }

      .article {
        margin: 0;
      }

      body {
        margin: 0;
        height: 100vh;
      }

      main {
        height: 100vh;
      }
      /* CSSここまで */
    </style>
  </head>

  <body>
    <!-- HTMLここから -->
    <div id="townBoard_content" style="height: 100%;">
      <div
        id="phase2"
        style="height: 100%; display: flex; flex-direction: column;"
      >
        <div
          class="blink"
          style="
            height: 20vh;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1% 3%;
          "
        >
          <img
            src="http://yxpartners.co.jp/wp-content/uploads/2024/12/attention-icon0101.png"
            alt=""
            style="height: 100%; width: 10%; object-fit: fill;"
          />
          <div
            style="
              font-size: 64rem;
              font-weight: 800;
              color: white;
              background-color: rgba(0, 0, 0, 1);
              border: solid;
              border-color: rgba(255, 0, 0, 0.785);
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              width: 50%;
              height: 100%;
              line-height: 1.5;
            "
          >
            津波　すぐにげて！<br />
            <span style="font-size: 24rem;">TSUNAMI EVACUATE!</span>
          </div>
          <img
            src="http://yxpartners.co.jp/wp-content/uploads/2024/12/attention-icon0101.png"
            alt=""
            style="height: 100%; width: 10%; object-fit: fill;"
          />
        </div>
        <div
          style="
            height: 80vh;
            width: 100%;
            background-color: rgba(19, 88, 188, 0.92);
            padding: 0 2%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
          "
        >
          <div style="height: 90%; width: 100%; display: flex; align-items: center;">
            <div
              style="
                width: 50%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
              "
            >
              <!-- Google Maps API -->
              <script src="https://maps.google.com/maps/api/js?key=AIzaSyAPtMOIDag9gFHRFa6RmyZILfWjqzsMvZc&language=ja">
              </script>
              <div
                id="tsunami_map"
                style="height: 95%; aspect-ratio: 1.2/1; width: 90%; border-radius: 1vw;"
              >
              </div>
            </div>
            <div
              class="separator"
              style="width: 0.2%; margin-left: 2%; height: 90%;"
            ></div>
            <div
              style="
                width: 49%;
                height: 100%;
                text-align: left;
                padding: 2% 5%;
              "
            >
              <div style="width: 100%;">避難所</div>
              <div
                style="
                  height: 80%;
                  width: 100%;
                  font-size: 40rem;
                  margin-top: 3%;
                "
              >
                <div
                  style="
                    height: 40%;
                    width: 100%;
                    background-color: black;
                    color: white;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    line-height: 1;
                  "
                >
                  <span
                    id="em_shelter_name"
                    style="font-size: 40rem;"
                  ></span><br />
                  <span id="en_em_shelter_name" style="font-size: 24rem;"></span>
                </div>
                <div style="margin-top: 3%;">
                  ここから 870m / <span id="em_shelter_time"></span
                  >分<br />
                  <span id="em_shelter_address"></span><br />
                </div>
              </div>
            </div>
          </div>
          <div
            style="
              height: 10%;
              width: 100%;
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div style="font-size: 24rem; margin-left: 0; width: 25%;">
              人流データに基づいて<br />
              ルートを計算しています
            </div>
            <div
              style="
                width: 50%;
                height: 100%;
                background-color: rgba(255, 255, 0, 0.989);
                display: flex;
                justify-content: space-between;
                margin: auto;
                align-items: center;
                padding: 0 3%;
              "
            >
              <div>
                予想高さ: 5m
              </div>
              <div>
                予想到達まで: <span id="tsunami_time"></span>分
              </div>
            </div>
            <div style="width: 25%;"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- HTMLここまで -->

    <!-- JSここから -->
    <script>
      const default_tsunami_time_m = 91;
      const MINITUES = 60000;
      const time_speed = 60;

      function tsunami_count_down() {
        let tsunami_time_m = default_tsunami_time_m;
        const tsunami_time_element = document.getElementById("tsunami_time");

        let second_interval_id = setInterval(function () {
          tsunami_time_element.innerText = tsunami_time_m;
          tsunami_time_m -= 1;
          if (tsunami_time_m < 0) {
            clearInterval(second_interval_id);
          }
        }, MINITUES / time_speed);
      }

      let em_shelter_name_element;
      let en_em_shelter_name_element;
      let em_shelter_time_element;
      let em_shelter_address_element;

      function set_em_shelter_element() {
        em_shelter_name_element = document.getElementById("em_shelter_name");
        en_em_shelter_name_element = document.getElementById(
          "en_em_shelter_name"
        );
        em_shelter_time_element = document.getElementById("em_shelter_time");
        em_shelter_address_element = document.getElementById(
          "em_shelter_address"
        );
      }

      let map;

      function init_map(latitude, longitude) {
        let MyLatLng = new google.maps.LatLng(latitude, longitude);
        var Options = {
          zoom: 15.3,
          center: MyLatLng,
          mapTypeId: "roadmap",
        };
        map = new google.maps.Map(document.getElementById("tsunami_map"), Options);

        const imageBounds = {
          north: 34.6984965737,
          south: 34.68126341222471,
          east: 135.2019762759,
          west: 135.17892244845066,
        };

        const groundOverlay = new google.maps.GroundOverlay(
          "http://yxpartners.co.jp/wp-content/uploads/2025/01/area_map_2_2.png",
          imageBounds
        );
        groundOverlay.setOpacity(0.5);
        groundOverlay.setMap(map);
      }

      function show_em_shelter_safe_Park() {
        const name = "こうべ市民福祉交流センター";
        em_shelter_name_element.innerText = name;
        em_shelter_time_element.innerText = 30;
        en_em_shelter_name_element.innerText =
          "Kobe Citizen Welfare Exchange Center";
        em_shelter_address_element.innerText = "神戸市中央区磯上通3丁目1-32";
      }

      const lat = 34.68987999295323;
      const lng = 135.19044936216036;

      function phase2() {
        init_map(lat, lng);
        set_em_shelter_element();
        show_em_shelter_safe_Park();
        tsunami_count_down();
      }

      phase2();
    </script>
    <!-- JSここまで -->
  </body>
</html>